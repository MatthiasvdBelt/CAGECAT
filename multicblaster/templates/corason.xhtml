{% extends "base.xhtml" %}
{% from "macros.xhtml" import create_scientific_input %}

        {% block title %}
        Job status
        {% endblock %}

        {% block content %}
<div>
    <form action="{{submit_url}}" method="post" enctype="multipart/form-data" onsubmit="mergeExponentials()">
        <input type="hidden" name="job_type" value="corason"/>
        <input type="hidden" name="prev_job_id" value="{{prev_job_id}}"/>

        <label for="inputSection">Input</label>
        <fieldset id="inputSection">
            <div>
                <label for="selectedQuery">Query</label>
                <input type="text" id="selectedQuery" name="selectedQuery" required="required" value="{{query}}"/>
            </div>
            <div>
                <label for="selectedReferenceCluster">Reference cluster</label>
                <input type="text" id="selectedReferenceCluster" name="selectedReferenceCluster" size="50" required="required" value="{{reference_cluster}}"/>
            </div>

            <div>
                <label for="selectedClustersToSearch">Selected clusters</label>
                <textarea cols="50" rows="8" id="selectedClustersToSearch" name="selectedClustersToSearch" required="required">{{cluster_to_search_in}}</textarea>
            </div>

        </fieldset>

        <br/>
        <label for="optionsSection">Options</label>
        <fieldset id="optionsSection">

            {{ create_scientific_input('e-value', 'Evalue', -15) }}

            <div>
                <label>Bitscore
                    <input type="checkbox" name="bitscore"/>
                </label>
            </div>
            <div>
                <label for="clusterRadio">Cluster radio?</label>
                <input type="number" value="10" id="clusterRadio" name="clusterRadio" required="required"/>
            <div>

            {{ create_scientific_input('e-cluster', 'Ecluster', -3) }}
            {{ create_scientific_input('e-core', 'Ecore', -3) }}

{#            Intentionally no list. See workers.py function corason#}

            <div>
                <label for="rescale">Rescale</label>
                <input type="number" id="rescale" name="rescale" value="85000" step="1" required="required"/>
            </div>
            <div>
                <label for="antismashFile">Antismash file</label>
                <input type="file" name="antismashFile" id="antismashFile"/>
            </div>



        </fieldset>
        <br/>


        <input type="submit" value="Run Corason!"/>
    </form>
</div>

        {% endblock %}

<!--        #     Usage:-->
<!--        #     CORASON extense manual can be consulted at:-->
<!--        #     https://github.com/nselem/EvoDivMet/wiki/Detailed-Tutorial/-->
<!--        #-->
<!--        #     &#45;&#45;rast_ids            Required when faa files are used (No Default) RAST ids tab-separated table with the following Rast data.-->
<!--        #     Job id\tGenome id\tOrganism name.-->
<!--        #-->
<!--        # &#45;&#45;g                   Genbank mode. If CORASON is used with genbank files instead of RAST fasta files, then -g must be used.-->
<!--        # A RAST ids file will be automatically created in this mode.-->
<!--        #-->
<!--        # &#45;&#45;queryfile,-q        Required (No default)   Your aminoacid sequence on fasta file.-->
<!--        #-->
<!--        # &#45;&#45;special_org,-s      Required (No default)   Job Id (from RAST) for the cluster where your query belongs.-->
<!--        #-->
<!--        # &#45;&#45;e_value             Default: 1E-15 (float)  E value. Minimal for a gene to be considered a hit.-->
<!--        #-->
<!--        # &#45;&#45;bitscore,-b         Default: 0 (Positive integer) After one run look into file .BLAST.pre to be more restrictive on hits.-->
<!--        #-->
<!--        # &#45;&#45;cluster_radio -c    Default: 10 (Positive integer) Number of genes in the neighborhood to analize.-->
<!--        #-->
<!--        # &#45;&#45;e_cluster           Default: 1E-3 (float)  e-value for sequences from reference cluster, values above it will be colored.-->
<!--        #-->
<!--        # &#45;&#45;e_core              Default: 1E-3 (float) e-value for Best Bidirectional Hits used to cunstruct genomic core from clusters.-->
<!--        #-->
<!--        # &#45;&#45;list                Default: GENOME/*.faa (string separated by "," or ":".-->
<!--        #     Example 1,2,4:6 produce a search on genomes 1,2,4,5,6)-->
<!--        # Leaving this option empty will conduce to search on all genomes in GENOME directory.-->
<!--        #-->
<!--        # &#45;&#45;rescale,r           Default: 85000 (integer) Increasing this number will show a bigger cluster region with smaller genes.-->
<!--        #-->
<!--        # &#45;&#45;antismash,a         AntiSMASH file optional-->
<!--        #-->
<!--        # &#45;&#45;verbose,v           If you would like to read more output from dir_scripts.-->
<!--        # Most of the time only useful if you would like script debugging.-->
<!--        #-->
<!--        # Remarks: For float values (as e_value, e_core etc) 0.001 will work, but-->
<!--        # .001 won't do it.-->