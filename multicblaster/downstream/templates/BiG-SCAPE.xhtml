{% extends "base.xhtml" %}
{% from "macros.xhtml" import showNavigationBar %}
{% from "macros.xhtml" import renderHelpButton %}
{% from 'macros.xhtml' import renderJobDetailsInput %}

{% block title %}BiG-SCAPE{% endblock %}

{% block navigationBar %}
{{ showNavigationBar('post-analysis') }}{% endblock %}

{% block content %}
    <div class="indent">
        <h2 class="">BiG-SCAPE</h2>

        <form action="{{ url_for('submit_job') }}">
            <input type="hidden" name="job_type" value="big_scape"/>
            {{ renderJobDetailsInput() }}

            <div class="input-layer">
                <label for="big_scape-label" class="input-label">Label</label>
                {{ renderHelpButton('big_scape-label') }}
                <input id="big_scape-label" name="label" type="text"/>
            </div>

            <div>
                <label class="checkbox-label">
                    <input id="singletons" name="include_singletons" type="checkbox"/>Include singletons
                </label>
                {{ renderHelpButton('big_scape-singletons', True) }}
            </div>

            <div class="input-layer">
                <label class="input-label" for="domain_overlap_cutoff">Domain overlap cutoff</label>
                {{ renderHelpButton('big_scape-domain_overlap_cutoff') }}
                <input id="domain_overlap_cutoff" name="domain_overlap_cutoff" type="number"/>
{#                TODO: check accepted values#}
            </div>

            <div class="input-layer">
                <label class="input-label" for="min_bgc_size">Min. BGC size</label>
                {{ renderHelpButton('big_scape-min_bgc_size') }}
                <input id="min_bgc_size" name="min_bgc_size" type="number"/>
            </div>

            <div>
                <label class="checkbox-label">
                    <input name="mix" type="checkbox"/>Mix
                </label>
                {{ renderHelpButton('big_scape-mix', True) }}
            </div>

            <div>
                <label class="checkbox-label">
                    <input id="classify" type="checkbox"/>No classify
                </label>
                {{ renderHelpButton('big_scape-classify', True) }}
            </div>

            <div class="input-layer">
                <label class="select-label" for="banned_classes">Banned classes</label>
                {{ renderHelpButton('big_scape-') }}
                <select multiple="multiple" name="banned_classes" id="banned_classes">
                    <option value="test">tester</option>
{#                    TODO: add more options#}
                </select>
            </div>

            <div class="input-layer">
                <label class="input-label" for="cutoffs">Cutoffs</label>
                {{ renderHelpButton('big_scape-cutoffs') }}
                <input id="cutoffs" name="cutoffs" type="text" pattern="\d\.\d+"/>
{#                Multiple numbers are allowed, separated by spaces#}
            </div>

            <div>
                <label class="checkbox-label" >
                    <input name="clans_off" type="checkbox"/>Clans off
                </label>
                {{ renderHelpButton('big_scape-clans_off', True) }}
{#                TODO: activate or deactivate options when toggled#}
            </div>

            <div class="input-layer">
                <label class="input-label" for="clan_cutoff">Clan cutoff</label>
                {{ renderHelpButton('big_scape-clan_cutoff') }}
                <input type="text" pattern="\d.\d+ \d.\d+" name="clan_cutoff" id="clan_cutoff" value="0.3 0.7"/>
{#                TODO: check if values are between 0.0 and 1.0 when field is left#}
{#                TODO: should be 2 numbers#}
            </div>

            <div>
                <label class="checkbox-label">
                    <input id="hybrids" type="checkbox"/>Hybrids off
                </label>
                {{ renderHelpButton('big_scape-hybrids') }}
            </div>

            <div class="input-layer">
                <label class="select-label" for="mode">Mode</label>
                {{ renderHelpButton('big_scape-mode') }}
                <select class="select-options" id="mode" name="mode">
                    <option value="global">global</option>
                    <option value="glocal">glocal</option>
                    <option value="auto">auto</option>
                </select>

            </div>

            <label for="mibig-fieldset" class="fieldset-label">Use BGCs from MIBiG</label>
            <fieldset id="mibig-fieldset">

                <div>
                    <label class="checkbox-label">
                        <input name="mibig" type="checkbox"/>Use MIBiG 2.1
                    </label>
                    {{ renderHelpButton('big_scape-mibig', True) }}
                </div>

                <div>
                    <label class="checkbox-label">
                        <input name="mibig14" type="checkbox"/>Include MIBiG 1.4
                    </label>
                    {{ renderHelpButton('big_scape-mibig14', True) }}
                </div>

                <div>
                    <label class="checkbox-label">
                        <input name="mibig13" type="checkbox"/>Include MIBiG 1.3
                    </label>
                    {{ renderHelpButton('big_scape-mibig13', True) }}
                </div>
            </fieldset>

            <div class="input-layer">
                <label class="select-label" for="query_bgc">Query BGC</label>
                {{ renderHelpButton('big_scape-query_bgc') }}
                <select class="select-options" id="query_bgc" name="query_bgc">
                    <option>TODO</option>
{#                    TODO: add selected clusters programmatically#}
                </select>
            </div>

            <div class="input-layer centered">
                <input class="button" type="submit"/>
            </div>

        </form>
    </div>

{% endblock %}