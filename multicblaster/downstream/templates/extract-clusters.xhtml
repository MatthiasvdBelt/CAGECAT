{% extends "base.xhtml" %}
{% from "macros.xhtml" import filtering_section %}
{% from "macros.xhtml" import showNavigationBar %}
{% from "macros.xhtml" import renderHelpButton %}
{#{% from "macros.xhtml" import createBackButton %}#}
{% from "macros.xhtml" import showSelectedClusters %}
{% from 'macros.xhtml' import renderJobDetailsInput %}

{% block title %}Extract clusters{% endblock %}

{% block navigationBar %}
    {{ showNavigationBar('post-analysis') }}
{% endblock %}

{% block content %}
{#    {{ createBackButton() }}#}
    <h2 class="indent">Extract clusters</h2>

<form action="{{submit_url}}" method="post">

    <input type="hidden" name="job_type" value="extract_clusters"/>
    <input type="hidden" name="prev_job_id" value="{{prev_job_id}}"/>

    {{ renderJobDetailsInput() }}

    {{ filtering_section('clusters', selected_scaffolds, cluster_numbers) }}

    <label class="fieldset-label" for="outputSectionExtractClusters">Output</label>
    <fieldset id="outputSectionExtractClusters">
        <div class="input-layer">
            <label class="input-label" for="prefix">Prefix</label>
            {{ renderHelpButton('prefix') }}
            <input class="custom-width" type="text" id="prefix" name="prefix" maxlength="15"/>
        </div>
        <div class="input-layer">
            <label class="select-label" for="format">Format</label>
            <select class="custom-width" name="format" id="format" required="required">
                <option value="genbank">Genbank</option>
                <option value="bigscape">BiG-SCAPE</option>
            </select>
            {{ renderHelpButton('format') }}
        </div>
        <div class="input-layer">
            <label class="input-label" for="maxclusters">Maximum clusters</label>
            {{ renderHelpButton('maxclusters') }}
            <input class="short" type="number" name="maxclusters" value="50" step="1" id="maxclusters" required="required"/>
        </div>
    </fieldset>

{#    <br/>#}
    {{ showSelectedClusters(cluster_headers, True, False) }}
    <div class="input-layer centered">
        <input class="button" type="submit"/>
    </div>
</form>
        {% endblock %}
