{% extends "base.xhtml" %}
{% from "macros.xhtml" import filtering_section %}
{% from "macros.xhtml" import showNavigationBar %}
{% from "macros.xhtml" import renderHelpButton %}
{#{% from "macros.xhtml" import createBackButton %}#}
{% from "macros.xhtml" import showSelectedClusters %}
{% from 'macros.xhtml' import renderJobDetailsInput %}
{% from 'macros.xhtml' import showRequiredInputsText %}

{% block title %}Visualization{% endblock %}

{% block navigationBar %}
    {{ showNavigationBar('post-analysis') }}
{% endblock %}

{% block content %}
{#    {{ createBackButton() }}#}

    <h2 class="indent">Visualize with query clusters</h2>
    {{  showRequiredInputsText() }}

    <form action="{{url_for('submit_job')}}" method="post">
        <input type="hidden" name="job_type" value="clinker_query"/>
        <input type="hidden" name="prev_job_id" value="{{prev_job_id}}"/>

        {{ renderJobDetailsInput() }}

        {{ filtering_section('clusters', selected_scaffolds, selected_clusters) }}
        <label class="fieldset-label" for="outputSection">Output</label>
        <fieldset>
            <div class="input-layer">
                <label class="input-label" for="maxclusters">Maximum clusters*</label>
                {{ renderHelpButton('maxclusters') }}
                <input type="number" name="maxclusters" min="1" max="{{ max_clusters_to_plot }}" value="50" step="1" id="maxclusters" required="required"/>
            </div>
        </fieldset>

        {{ showSelectedClusters(cluster_headers, True, False) }}
{#        <h3 class="indent">Overview of selected clusters</h3>#}
{#        <ul>#}
{#        {% for header in cluster_headers %}#}
{#            {% if not header %}#}
{#                <li>All clusters are selected</li>#}
{#            {% else %}#}
{#                <li>{{header}}</li>#}
{#            {% endif %}#}
{#        {% endfor %}#}
{#        </ul>#}

        <div class="input-layer centered">
            <input class="button" type="submit"/>
        </div>
    </form>
{% endblock %}